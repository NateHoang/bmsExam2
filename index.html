<!DOCTYPE html>
<html>
  <head>
    <title>BMS Exam 2</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />

    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI',
          'Ubuntu', 'Droid Sans', sans-serif, 'Meiryo';
        padding: 0 12px;
      }

      table {
        border-collapse: collapse;
        margin-bottom: 24px;
        width: 100%;
      }
      table > thead > tr > th,
      table > tbody > tr > td {
        padding: 5px 10px;
      }
      table > thead > tr > th {
        text-align: left;
        border-bottom: 1px solid;
      }
      table > tbody > tr + tr > td {
        border-top: 1px solid;
      }

      .tooltip {
        position: relative;
        cursor: pointer;
        display: inline-block;
      }
      .tooltip img {
        display: none;
        position: absolute;
        width: var(--tooltip-img-width, 300px);
        height: auto;
        border: 2px solid #f00;
        background: #ffffcc;
        padding: 5px;
        z-index: 10;
        bottom: 100%;
        left: 50%;
        transform: translateX(10px);
        max-width: 90vw; /* ✅ prevents image from exceeding viewport width */
        max-height: 80vh; /* ✅ keeps image inside visible page vertically */
        object-fit: contain;
        box-sizing: border-box;
      }

      .tooltip[data-position='below'] img {
        bottom: auto;
        top: 100%;
      }

      .tooltip:hover img {
        display: block;
        /* Reposition if too close to top or bottom of viewport */
        top: auto;
        bottom: auto;
      }

      .blurred {
        filter: blur(3px);
        transition: filter 0.3s ease;
      }

      table td:not(:first-child),
      table td li {
        cursor: pointer;
      }

      summary {
        font-size: 22px;
        font-weight: bold;
        cursor: pointer;
        margin: 16px 0;
      }

      details {
        border: 2px solid #444;
        border-radius: 8px;
        padding: 10px;
        background: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <div class="blur-buttons">
      <button id="blurAll">Blur All</button>
      <button id="unblurAll">Unblur All</button>
    </div>
    <!-- Lecture 1 -->
    <details>
      <summary>Lecture 1: Mental Health</summary>
      <my-header>Mental Health Overview</my-header>
      <table>
        <thead>
          <tr>
            <th>Disorder</th>
            <th>Distinguishing feature(s)</th>
            <th>Monitoring / Diagnostic duration</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Major Depressive Disorder (MDD)</strong></td>
            <td>
              <strong>Requires ≥5 symptoms</strong> including
              <strong>depressed mood or anhedonia</strong>; episode
              <strong>not due to substances/medical condition</strong>;
              <strong>no history of mania/hypomania</strong>.
            </td>
            <td>
              <strong
                >Symptoms present most of the day, nearly every day for ≥2
                weeks</strong
              >
              (episode duration criterion).
            </td>
          </tr>
          <tr>
            <td><strong>Persistent Depressive Disorder (Dysthymia)</strong></td>
            <td>
              <strong
                >Chronic, mild–moderate depressive symptoms present more days
                than not</strong
              >
              (long-standing low mood).
            </td>
            <td>
              <strong>Symptoms persist ≥2 years</strong> (chronic course /
              monitoring period).
            </td>
          </tr>
          <tr>
            <td><strong>Bipolar I Disorder</strong></td>
            <td>
              <strong>Presence of a full manic episode</strong> (abnormally
              elevated/irritable mood with increased activity/energy). Mania
              distinguishes Bipolar I.
            </td>
            <td>
              <strong>Manic episode: ≥1 week</strong> (or any duration if
              hospitalization). Depressive episodes commonly last
              <strong>≥2 weeks</strong> when present.
            </td>
          </tr>
          <tr>
            <td><strong>Bipolar II Disorder</strong></td>
            <td>
              <strong>Hypomanic episodes + major depressive episodes</strong>
              with <strong>no history of full mania</strong>;
              <strong>hypomania is less severe</strong>.
            </td>
            <td>
              <strong>Hypomanic episodes last ≥4 days</strong>; depressive
              episodes follow MDD criteria (≥2 weeks).
            </td>
          </tr>
          <tr>
            <td><strong>Cyclothymic Disorder</strong></td>
            <td>
              <strong
                >Numerous periods of hypomanic symptoms and mild depressive
                symptoms that do NOT meet full episode criteria</strong
              >.
            </td>
            <td>
              <strong>Symptoms persist ≥2 years</strong> (frequent but
              subthreshold mood swings).
            </td>
          </tr>
          <tr>
            <td><strong>Generalized Anxiety Disorder (GAD)</strong></td>
            <td>
              <strong
                >Excessive, persistent worry across multiple domains</strong
              >
              with associated anxiety symptoms (cognitive/physical) and often
              early onset.
            </td>
            <td><strong>Duration for diagnosis: ≥6 months</strong>.</td>
          </tr>
          <tr>
            <td><strong>Panic Disorder</strong></td>
            <td>
              <strong>Recurrent, unexpected panic attacks</strong> that peak
              within minutes, plus
              <strong>persistent worry or behavior change</strong> related to
              attacks.
            </td>
            <td>
              Diagnostic pattern includes
              <strong>recurrent attacks within a 1-month period</strong> and
              ongoing worry/behavioral change after attacks.
            </td>
          </tr>
          <tr>
            <td><strong>Schizophrenia</strong></td>
            <td>
              <strong>Requires ≥1 core positive symptom</strong> (delusions,
              hallucinations, or disorganized speech) plus another symptom
              (positive/negative/cognitive).
            </td>
            <td>
              <strong>Active-phase symptoms continuously for ≥1 month</strong>
              and an overall disturbance lasting <strong>≥6 months</strong>.
            </td>
          </tr>
        </tbody>
      </table>
    </details>

    <style>
      /* same as before */
      .blurred {
        filter: blur(10px);
        transition: filter 0.3s ease;
      }

      /* Make clickable cursor for td */
      table td:not(:first-child) {
        cursor: pointer;
      }

      /* li inside blurred td will inherit blur from parent */
      table td.blurred li {
        filter: inherit;
      }

      .blur-buttons {
        text-align: center;
        margin-bottom: 16px;
      }
      .blur-buttons button {
        margin: 0 5px;
        padding: 5px 12px;
        font-size: 16px;
        cursor: pointer;
      }
      .blur-section li {
        cursor: pointer;
        margin-bottom: 6px;
      }

      /* Blur effect same as td */
      .blur-section li.blurred {
        filter: blur(10px);
        transition: filter 0.3s ease;
      }

      /* Override for bold text so it always stays clear */
      .blur-section li.blurred b {
        filter: none !important;
      }

      .blur-section .blur-target {
        cursor: pointer;
        display: inline-block;
      }

      .blurred {
        filter: blur(10px);
        transition: filter 0.3s ease;
      }
    </style>

    <script>
      // === BLUR LOGIC ===
      document.addEventListener('DOMContentLoaded', () => {
        // Select table cells + blur-target spans
        const blurCells = document.querySelectorAll(
          'table td:not(:first-child), .blur-section .blur-target'
        );

        blurCells.forEach((cell) => {
          cell.addEventListener('click', () => {
            cell.classList.toggle('blurred');
          });
        });

        // Keyboard shortcut (space toggles all)
        document.addEventListener('keydown', (event) => {
          if (event.code === 'Space') {
            const allBlurred = Array.from(blurCells).every((cell) =>
              cell.classList.contains('blurred')
            );
            if (allBlurred) {
              blurCells.forEach((cell) => cell.classList.remove('blurred'));
            } else {
              blurCells.forEach((cell) => cell.classList.add('blurred'));
            }
            event.preventDefault();
          }
        });

        // Buttons
        document.getElementById('blurAll').addEventListener('click', () => {
          blurCells.forEach((cell) => cell.classList.add('blurred'));
        });
        document.getElementById('unblurAll').addEventListener('click', () => {
          blurCells.forEach((cell) => cell.classList.remove('blurred'));
        });
      });

      // === CUSTOM HEADER ELEMENT ===
      class MyHeader extends HTMLElement {
        connectedCallback() {
          const text = this.innerHTML.trim() || 'Section Title';

          this.innerHTML = `
        <div
          style="
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            --tooltip-img-width: 400px;
          "
        >
          ${text}
        </div>
        <br />
      `;
        }
      }

      // Important: name must contain a hyphen
      customElements.define('my-header', MyHeader);
    </script>
  </body>
</html>
